<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>FAT32 Image Defragmenter: dev/#gpl/defrag/src/entry.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">FAT32 Image Defragmenter&#160;<span id="projectnumber">0.1b</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('entry_8c.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">dev/#gpl/defrag/src/entry.c File Reference</div>  </div>
</div>
<div class="contents">

<p>This is the main module, it handles command line parameters and executes defragmentation.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entry_8c.html#a0f6f70ca2e3cf9ba956354b025dbac05">print_usage</a> (FILE *stream, int exit_code)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entry_8c.html#a7a62b5b0acef2e23236ee48bf51565bb">error</a> (int p_usage, char *message,...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entry_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">it sets upt message domain, parse the command line parameters, performs disk fragmentation analysis and calls defragmentation function. The message domain is taken from default directory /usr/share/locale, and it is called f32id_loc. For parsing the command line parameters (as short ones, as long ones and their arguments), there is used getopt_long function that it performs it for me :-)  <a href="#a0ddf1224851353fc92bfbff6f499fa97"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entry_8c.html#ae44e96c1808be0a56730c26b8b3d2c2a">program_name</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entry_8c.html#a8685218a3d454afab678d69e16e2df3a">output_stream</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="entry_8c.html#a4f7caf3ead45aac3963d1e354e820017">debug_mode</a> = 0</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>At first, text domain is set up according to LOCALE setting, then the command line parameters are parsed using getopt_long function. All program messages (besides error messages and progress bar) are written into standard output stream (defined by pointer output_stream) that is on the start set up to stdout. If -l (or -log_file) parameter is used, then messages are re-directed into the log file that is given as first argument of this parameter.</p>
<h2><a class="anchor" id="Options"></a>
Description of command line parameters</h2>
<ul>
<li>-h (or --help) - Shows information of program usage</li>
<li>-l logfile (or --log_file logfile) - Redirects program messages into log file</li>
<li>-x (or --xmode) - Forces the program to work in debug mode (it shows many additional informations) </li>
</ul>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a0f6f70ca2e3cf9ba956354b025dbac05"></a><!-- doxytag: member="entry.c::print_usage" ref="a0f6f70ca2e3cf9ba956354b025dbac05" args="(FILE *stream, int exit_code)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_usage </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>exit_code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The procedure prints message of program usage and exits. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>define stream where the messages should be written to </td></tr>
    <tr><td class="paramname">exit_code</td><td>defines exit code by which the program will end </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7a62b5b0acef2e23236ee48bf51565bb"></a><!-- doxytag: member="entry.c::error" ref="a7a62b5b0acef2e23236ee48bf51565bb" args="(int p_usage, char *message,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void error </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>p_usage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>It shows error message into stderr stream and according to setting of p_usage parameter show program usage. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">p_usage</td><td>if print_usage function should be called </td></tr>
    <tr><td class="paramname">message</td><td>error message </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0ddf1224851353fc92bfbff6f499fa97"></a><!-- doxytag: member="entry.c::main" ref="a0ddf1224851353fc92bfbff6f499fa97" args="(int argc, char *argv[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Main function If the -h switch was defined (shows program usage), then other parameters are ignored (instead of -l switch) and the program is terminated. In other cases the program continues with fragmentartion analysis and by the defragmentation itself (in the case of need). Defragmentation will be executed only if the disk is fragmented of minimal 1%. </p>

<p><p>the defragmentation itself </p>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ae44e96c1808be0a56730c26b8b3d2c2a"></a><!-- doxytag: member="entry.c::program_name" ref="ae44e96c1808be0a56730c26b8b3d2c2a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* <a class="el" href="entry_8c.html#ae44e96c1808be0a56730c26b8b3d2c2a">program_name</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Name of the program </p>

</div>
</div>
<a class="anchor" id="a8685218a3d454afab678d69e16e2df3a"></a><!-- doxytag: member="entry.c::output_stream" ref="a8685218a3d454afab678d69e16e2df3a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FILE* <a class="el" href="entry_8c.html#a8685218a3d454afab678d69e16e2df3a">output_stream</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Output stream (either stdout, or log file) </p>

</div>
</div>
<a class="anchor" id="a4f7caf3ead45aac3963d1e354e820017"></a><!-- doxytag: member="entry.c::debug_mode" ref="a4f7caf3ead45aac3963d1e354e820017" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="entry_8c.html#a4f7caf3ead45aac3963d1e354e820017">debug_mode</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If the debud mode is used </p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="entry_8c.html">entry.c</a>      </li>
      <li class="footer">Generated on Tue Apr 26 2011 11:33:24 for FAT32 Image Defragmenter by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
